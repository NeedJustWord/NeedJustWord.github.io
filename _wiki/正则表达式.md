---
layout: wiki
title: 正则表达式
---

## 元字符

### 基本元字符

| 基本元字符   | 功能                               |
| ------------ | ---------------------------------- |
| `.` (点号)   | 匹配除换行符(`\n`)外的任意单个字符 |
| `^` (脱字符) | 匹配字符串的开始位置               |
| `$` (美元符) | 匹配字符串的结束位置               |
| `\` (反斜杠) | 转义字符，使后面的字符失去特殊含义 |

### 字符类元字符

| 字符类元字符       | 功能                                              |
| ------------------ | ------------------------------------------------- |
| `[]` (方括号)      | 定义字符集合，匹配其中任意一个字符                |
| `[^]` (否定字符类) | 匹配不在方括号中的任意字符                        |
| `-` (连字符)       | 在字符类中表示范围，示例：`[a-z]`匹配任意小写字母 |

### 量词元字符

| 贪婪量词元字符 | 惰性量词元字符 | 功能                          |
| -------------- | -------------- | ----------------------------- |
| `*` (星号)     | `*?`           | 匹配零次或多次，等效于`{0,}`  |
| `+` (加号)     | `+?`           | 匹配一次或多次，等效于`{1,}`  |
| `?` (问号)     | `??`           | 匹配零次或一次，等效于`{0,1}` |
| `{n}` (花括号) | `{n}?`         | 恰好匹配n次                   |
| `{n,}`         | `{n,}?`        | 至少匹配n次                   |
| `{n,m}`        | `{n,m}?`       | 匹配n到m次                    |

> 量词元字符表示其前面的子表达式要匹配多少次，其中贪婪量词匹配次数尽可能多。贪婪量词后面加上`?`就是惰性量词，惰性量词匹配次数尽可能少

### 分组和选择元字符

| 分组和选择元字符 | 功能                 |
| ---------------- | -------------------- |
| `()` (圆括号)    | 定义子表达式或捕获组 |
| `|` (竖线)       | 表示"或"关系         |

### 特殊字符类元字符

| 特殊字符类元字符 | 功能                                                        |
| ---------------- | ----------------------------------------------------------- |
| `\d`             | 匹配任意数字，等价于 `[0-9]`                                |
| `\D`             | 匹配任意非数字，等价于 `[^0-9]`                             |
| `\w`             | 匹配任意单词字符(字母、数字、下划线)，等价于 `[a-zA-Z0-9_]` |
| `\W`             | 匹配任意非单词字符，等价于 `[^a-zA-Z0-9_]`                  |
| `\s`             | 匹配任意空白字符(空格、制表符、换行符等)                    |
| `\S`             | 匹配任意非空白字符                                          |

### 边界元字符

| 边界元字符 | 功能           |
| ---------- | -------------- |
| `\b`       | 匹配单词边界   |
| `\B`       | 匹配非单词边界 |

### 其他元字符

| 其他元字符 | 功能           |
| ---------- | -------------- |
| `\n`       | 匹配换行符     |
| `\t`       | 匹配制表符     |
| `\r`       | 匹配回车符     |
| `\f`       | 匹配换页符     |
| `\v`       | 匹配垂直制表符 |



## 位置匹配

| 元字符       | 功能                 |
| ------------ | -------------------- |
| `^` (脱字符) | 匹配字符串的开始位置 |
| `$` (美元符) | 匹配字符串的结束位置 |
| `\b`         | 匹配单词边界         |
| `\B`         | 匹配非单词边界       |



## 分组和引用

### 分组

| 分组               | 功能                                          |
| ------------------ | --------------------------------------------- |
| `(pattern)`        | 捕获分组，捕获匹配的内容并分配编号（从1开始） |
| `(?:pattern)`      | 非捕获分组，分组但不捕获                      |
| `(?<name>pattern)` | 命名分组，为分组指定名称name                  |

> 分组的编号按`(`出现的顺序进行分配

```
文本：ab
查找：((\w)(\w))
替换：$1 $2 $3
替换结果：ab a b
```

### 引用

| 引用                 | 功能                                                   |
| -------------------- | ------------------------------------------------------ |
| `\number`            | 反向引用，引用前面匹配的分组                           |
| `\k<name>`           | 命名反向引用，引用前面匹配的命名分组                   |
| `\number`或`$number` | 替换引用，在替换操作中引用分组(不同语言不一样)         |
| `${name}`            | 命名替换引用，在替换操作中引用命名分组(不同语言不一样) |



## 断言

| 断言类型     | 语法           | 别称     | 通俗解释                                |
| ------------ | -------------- | -------- | --------------------------------------- |
| 正向先行断言 | `(?=pattern)`  | 正向前瞻 | 我要找的位置，它的右边必须是pattern     |
| 负向先行断言 | `(?!pattern)`  | 负向前瞻 | 我要找的位置，它的右边一定不能是pattern |
| 正向后行断言 | `(?<=pattern)` | 正向后顾 | 我要找的位置，它的左边必须是pattern     |
| 负向后行断言 | `(?<!pattern)` | 负向后顾 | 我要找的位置，它的左边一定不能是pattern |

> 记忆方式：`=`：等于号，表肯定。`!=`：不等于号，表否定，简写成`!`。`<`：尖向左，表示找左边

### 断言的特点

1. **零宽度：**不占用匹配字符的位置
2. **条件检查：**只检查是否满足特定条件
3. **不影响匹配结果：**仅作为匹配的约束条件

### 示例

```
正向先行断言
功能：提取价格
文本：商品A价格299元，数量50；商品B价格599元，数量100
查找：\d+(?=元)
匹配结果：[299,599]
```

```
负向先行断言
功能：查找不以.js结尾的文件名
文本：index.js app.ts config.json main.js readme.md
查找：\w+\.(?!js\b)\w+
匹配结果：[app.ts,config.json,readme.md]
```

```
正向后行断言
功能：提取人民币和美元价格
文本：Price: $199, £89, ¥1200
查找：(?<=[¥$])\d+
匹配结果：[199,1200]
```

```
负向后行断言
功能：提取非负整数
文本：今天的温度是-5度，明天升温到3度，后天气温是-10度，室内温度保持22度
查找：(?<!-)\b\d+
匹配结果：[3,22]
```



## 运算符优先级

| 运算符(越前越优先)               | 表达式             |
| -------------------------------- | ------------------ |
| `\`                              | 转义符             |
| `()` `(?:)` `(?=)` `[]`          | 分组与断言         |
| `*` `+` `?` `{n}` `{n,}` `{n,m}` | 限定词(量词)       |
| `^` `$` `\任何元字符` `任何字符` | 字符序列与位置锚点 |
| `|`                              | 或运算符           |



## Q&A

### 常用正则表达式

| 名称     | 正则表达式                            | 功能                                        |
| -------- | ------------------------------------- | ------------------------------------------- |
| 密码强度 | `(?=.*[A-Z])(?=.*[a-z])(?=.*\d).{8,}` | 必须有大写字母、小写字母和数字，长度至少是8 |

### 正则表达式大小写转换

| 元字符 | 含义                                   |
| ------ | -------------------------------------- |
| \u     | 匹配项的第一个字符转大写，其他保持不变 |
| \U     | 匹配项转大写                           |
| \l     | 匹配项的第一个字符转小写，其他保持不变 |
| \L     | 匹配项转小写                           |

```
示例1：
文本：this is my book
查找：(\w+)
替换：\u$1
效果：This Is My Book
```

```
示例2：
文本：this is my book
查找：(\w+)
替换：\U$1
效果：THIS IS MY BOOK
```

```
示例2：首字母大写，其余小写
文本：THIS IS MY BOOK
查找：(\w)(\w+)
替换：\U$1\L$2
效果：This Is My Book
```



## 参考资料

1. [正则表达式大小写转换](https://blog.csdn.net/small__snail__5/article/details/88946566)
2. [正则表达式中\L、\Q和\E的用法总结](https://blog.csdn.net/gsjthxy/article/details/107854460)
3. [正则表达式 - 教程](https://www.runoob.com/regexp/regexp-tutorial.html)
4. [正则表达式语言 - 快速参考](https://learn.microsoft.com/zh-cn/dotnet/standard/base-types/regular-expression-language-quick-reference)

